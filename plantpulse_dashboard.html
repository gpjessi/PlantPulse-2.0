<!DOCTYPE html>
<html>
<head>
    <title>PlantPulse Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
        h1 { color: #2e8b57; }
        p { font-size: 1.2em; }
        span { font-weight: bold; }
    </style>
</head>
<body>
    <h1>PlantPulse Live Data</h1>
    <p>Soil Moisture: <span id="soil">--</span></p>
    <p>Light Level: <span id="light">--</span></p>
    <p>Temperature: <span id="temp">--</span> Â°C</p>
    <p>Humidity: <span id="hum">--</span> %</p>

    <script>
        //  ESP32's IP ADDRESS
        const API_URL = 'http://192.168.1.73/api/sensordata';

        async function fetchData() {
            try {
                const response = await fetch(API_URL);
                const data = await response.json();

                // Update the HTML with the new data
                document.getElementById('soil').textContent = data.soil_moisture;
                document.getElementById('light').textContent = data.light_level;
                document.getElementById('temp').textContent = data.temperature.toFixed(1);
                document.getElementById('hum').textContent = data.humidity.toFixed(1);

            } catch (error) {
                console.error('Error fetching data:', error);
                // Optionally
            }
        }

        // Fetch data immediately when the page loads
        fetchData();

        // Then, set up a timer to fetch new data every 3 seconds (3000 milliseconds)
        setInterval(fetchData, 3000);
    </script>
</body>
</html>